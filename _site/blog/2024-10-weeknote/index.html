<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>2024 ▸ 10 ▸ Weeknote</title>
		<meta name="description" content="Mostly maps">
		<link rel="alternate" href="feed/feed.xml" type="application/atom+xml" title="Parallels">
		
		<style>/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #082840;
	--text-color-link-active: #5f2b48;
	--text-color-link-visited: #17050F;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 40em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img {
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
main :first-child {
	margin-top: 0;
}

header {
	border-bottom: 1px dashed var(--color-gray-20);
}
header:after {
	content: "";
	display: table;
	clear: both;
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
}
pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-all;
}

/* Header */
header {
	display: flex;
	gap: 1em .5em;
	flex-wrap: wrap;
	align-items: center;
	padding: 1em;
}
.home-link {
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
	margin-right: 2em;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
	display: inline-block;
	margin-right: 1em;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	list-style: none;
	padding: 0;
	padding-left: 1.5rem;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	content: "" counter(start-from, decimal-leading-zero) ". ";
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	padding-left: .25em;
	padding-right: .5em;
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	text-transform: capitalize;
	font-style: italic;
}
.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}</style>
		<link rel="me" href="https://mapstodon.space/@alexei">
		<script data-goatcounter="https://tree5678.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>
	</head>
	<body>
		<a href="#skip" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/" class="home-link">Parallels</a>
			<nav>
				<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/">Home</a></li>
					<li class="nav-item"><a href="/blog/">Archive</a></li>
					<li class="nav-item"><a href="/about/">About</a></li>
					<li class="nav-item"><a href="/feed/feed.xml">Feed</a></li>
				</ul>
			</nav>
		</header>

		<main id="skip">
			<heading-anchors>
				
<h1 id="2024-10-weeknote">2024 ▸ 10 ▸ Weeknote</h1>

<ul class="post-metadata">
	<li><time datetime="2024-03-18">18 March 2024</time></li>
</ul>

<p>Squeezing in last week’s weeknote before it’s time to write this week’s.</p>
<h1 id="live-30-minute-drive-time-coverage">Live 30-minute drive-time coverage</h1>
<p><picture><source type="image/avif" srcset="/blog/2024-10-weeknote/o2eW6bsf9F-737.avif 737w"><source type="image/webp" srcset="/blog/2024-10-weeknote/o2eW6bsf9F-737.webp 737w"><img loading="lazy" decoding="async" src="/blog/2024-10-weeknote/o2eW6bsf9F-737.jpeg" alt="Screenshot of demo showing live 30-minute travel coverage from BRC response vehicles" width="737" height="427"></picture>
<em>Screenshot of demo showing live 30-minute travel coverage from BRC response vehicles</em></p>
<p>Last week I worked on a script that produces live coverage areas based on our response vehicles’ current locations. It shows the areas that are reachable within 30 minutes by any of our response vehicles and updates once an hour. I used the <a href="https://traveltime.com/">TravelTime API</a> for this rather than the ESRI <a href="https://pro.arcgis.com/en/pro-app/latest/help/analysis/networks/service-area-analysis-layer.htm">service area analysis tool</a>. The ESRI service uses credits with an equivalent cost of about £120 per day to generate hourly service areas for 100 vehicles. For the TravelTime service, our usage fits comfortably on the free tier they’ve assigned us as a charity user (the API limit is 300 calls per minute). The demo of this dataset has already sparked some interesting conversations and I think it’s something we’ll develop more.</p>
<h1 id="fixing-errors-in-conflict-data-processing">Fixing errors in conflict data processing</h1>
<p>A colleague spotted an issue with a data pipeline I set up to pull conflict data from the ACLED API for countries BRC works with. I’d seeded the dataset with six countries that are a priority for one team and then expanded it to cover 20 more countries that are useful for another team. In doing this, I forgot to regenerate the seed dataset, so the newer additions were missing historic data. I regenerated the seed data and am uploading around 1m new rows of data in chunks so that it doesn’t overwhelm the server.</p>
<h1 id="building-a-qgis-plugin">Building a QGIS plugin</h1>
<p>On Tuesday, I took a personal development day to focus on developing my understanding of Python integration in QGIS through the <a href="https://qgis.org/pyqgis/">PyQGIS</a> interface, which makes QGIS’ C++ functions available in Python.</p>
<p>It set myself a goal of building a working QGIS plugin, which I managed. It’s a tool to help standardise map layouts by providing a grid items can be aligned to following the <a href="https://mark-anthony.ca/modular-grids-indesign/">modular grid system</a> (inspired by <a href="https://tarasdesign.github.io/gridder/">this tool</a>). By default, QGIS’s layout guides are tricky to work with: you have to do lots of calculations based on the page size and enter them one by one in the guide settings.</p>
<p><picture><source type="image/avif" srcset="/blog/2024-10-weeknote/wUDjFhclo--1089.avif 1089w"><source type="image/webp" srcset="/blog/2024-10-weeknote/wUDjFhclo--1089.webp 1089w"><img loading="lazy" decoding="async" src="/blog/2024-10-weeknote/wUDjFhclo--1089.png" alt="Screenshot of QGIS modular grid builder plugin" width="1089" height="617"></picture></p>
<p><em>Screenshot of QGIS modular grid builder plugin</em></p>
<p>This plugin is a step to making that easier — you can tell it what sort of grid you want and your page size, and it will add the guides automatically. It’s <a href="https://github.com/ioalexei/modular_grid_builder/">now on GitHub</a> and hopefully it will be useful to at least someone else!</p>

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/blog/2024-03-06-converting-our-eps-logo-archive-to-svg-and-png/">Converting our EPS logo archive to SVG and PNG</a></li><li class="links-nextprev-next">Next →<br><a href="/blog/2024-03-21-the-economists-map-style/">The Economist&#39;s mapping style guide</a></li>
</ul>

			</heading-anchors>
		</main>

		<footer>
			<p>Follow on <a href="https://britishredcrosssociety.github.io/gis_im_weeknotes/">RSS</a></p>
			<p><em>Built with <a href="https://www.11ty.dev/">Eleventy v3.0.0</a></em></p>
		</footer>

		<!-- This page `/blog/2024-10-weeknote/` was built on 2025-03-22T14:47:58.319Z -->
		<script type="module" src="/dist/xbxy_EL6cU.js"></script>
	</body>
</html>
